<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Simple WebGL Example</title>
    <style>
        body {
            margin: 0;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script>
</head>

<body>
    <canvas id="glCanvas"></canvas>
    <script>// Vertex shader
        const vertexShaderSource = `#version 300 es
        precision highp float;
        
        in vec3 aVertexPosition;
        
        uniform mat4 uModelViewMatrix;
        uniform mat4 uProjectionMatrix;
        
        void main() {
            gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);
        }
        `;

        // Fragment shader
        const fragmentShaderSource = `#version 300 es
        precision highp float;
        
        out vec4 fragColor;
        
        void main() {
            fragColor = vec4(1.0, 0.5, 0.2, 1.0);
        }
        `;

        // Vertex data for a cube
        const vertices = [
            // Front face
            -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0,

            // Back face
            -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0,

            // Top face
            -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0,

            // Bottom face
            -1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0,

            // Right face
            1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0,

            // Left face
            -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0,
        ];

        const indices = [
            0,
            1,
            2,
            2,
            3,
            0, // Front face
            4,
            5,
            6,
            6,
            7,
            4, // Back face
            8,
            9,
            10,
            10,
            11,
            8, // Top face
            12,
            13,
            14,
            14,
            15,
            12, // Bottom face
            16,
            17,
            18,
            18,
            19,
            16, // Right face
            20,
            21,
            22,
            22,
            23,
            20, // Left face
        ];

        // Get the canvas and WebGL context
        const canvas = document.getElementById("glCanvas");
        const gl = canvas.getContext("webgl2");

        // Set up the WebGL context
        gl.enable(gl.DEPTH_TEST);
        gl.depthFunc(gl.LEQUAL);
        gl.clearColor(0.0, 0.0, 0.0, 1.0);

        // Create shaders
        const vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vertexShaderSource);
        gl.compileShader(vertexShader);

        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, fragmentShaderSource);
        gl.compileShader(fragmentShader);

        // Create the program and link shaders
        const program = gl.createProgram();
        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);

        // Create vertex buffer
        const vertexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

        // Create index buffer
        const indexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
        gl.bufferData(
            gl.ELEMENT_ARRAY_BUFFER,
            new Uint16Array(indices),
            gl.STATIC_DRAW
        );

        // Get attribute and uniform locations
        const aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
        const uModelViewMatrix = gl.getUniformLocation(program, "uModelViewMatrix");
        const uProjectionMatrix = gl.getUniformLocation(program, "uProjectionMatrix");

        // Set the viewport and clear the canvas
        gl.viewport(0, 0, canvas.width, canvas.height);
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

        // ... (kode lainnya sama seperti sebelumnya) ...

        // Set up the model-view and projection matrices
        const modelViewMatrix = new Float32Array(16);
        const projectionMatrix = new Float32Array(16);

        mat4.identity(modelViewMatrix);
        mat4.translate(modelViewMatrix, modelViewMatrix, [0.0, 0.0, -10.0]);

        // Mengatur proyeksi ortogonal untuk melihat ketiga sisi kubus
        const aspect = canvas.width / canvas.height;
        mat4.ortho(
            projectionMatrix,
            -8.0 * aspect,
            8.0 * aspect,
            -8.0,
            8.0,
            -8.0,
            16.0
        );

        // Use the program and set uniforms
        gl.useProgram(program);
        gl.uniformMatrix4fv(uModelViewMatrix, false, modelViewMatrix);
        gl.uniformMatrix4fv(uProjectionMatrix, false, projectionMatrix);

        // ... (kode lainnya sama seperti sebelumnya) ...

        // Set up vertex attributes
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.vertexAttribPointer(aVertexPosition, 3, gl.FLOAT, false, 0, 0);
        gl.enableVertexAttribArray(aVertexPosition);

        // Draw the cube
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
        gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);

    </script>
</body>

</html>